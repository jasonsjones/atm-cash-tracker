<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/bootstrap.css" type="text/css">
    <link rel="stylesheet" href="css/style.css" type="text/css">
    <title>ATM Cash Tracker with AngularJS</title>
  </head>
  <body data-ng-app="app">

    <div class="container">

      <nav class="navbar navbar-inverse" role="navigation">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse"
              data-target="#bs-navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Sandbox</a>
          </div> <!-- end navbar-header -->
          <!-- collect the nav links -->
          <div id="bs-navbar-collapse" class="navbar-collapse collapse">
            <ul class="navbar-nav nav">
              <li class="active"><a href="#">Home</a></li>
              <!-- comment
              <li><button class="btn btn-default navbar-btn">
                  <span class="glyphicon glyphicon-plus"></span> Add ATM Withdaral</button></li>
              -->
            </ul>
          </div>
        </div> <!-- end container -->
      </nav> <!-- end navbar -->

      <div class="page-header" ng-controller="purchaseCtrl">
        <h1>ATM Cash Tracker <small>a tracker for the OCD in me...</small></h1>
        <p class="lead">Single page application to track ATM cash withdrawals
          and itemized purchases.</p>
        <p ng-show="{{isDummyData()}}"><em>NOTE: The data contained on this page is dummy data, but is a
            good representation of real data that will be managed by this
            app.</em></p>
      </div> <!-- end page-header -->

      <!-- need to implement button to add ATM withdrawal
      <button class="btn btn-default"> <span class="glyphicon
          glyphicon-plus"></span> Add ATM Withdaral</button>
      -->

      <div ng-controller="purchaseCtrl">
        <div ng-repeat="transaction in withdrawals">
          <div class="col-md-4">
            <div class="panel panel-default">
              <div class="panel-heading">
                <img class="pull-left" src="images/atm-32.png" alt="atm icon">
                <h2 class="panel-title text-right">ATM Withdrawal</h2>
                <p class="text-right">
                  <em>{{ getTotalAmount($index) | currency }} on
                    {{ transaction.date | date : shortdate }} </em>
                </p>
              </div><!-- end panel-heading -->
              <div class="panel-body">
                <table class="table">

                  <thead>
                    <th>amount</th>
                    <th>description</th>
                  </thead>

                  <tbody class="purchase-item">
                    <tr ng-repeat="p in transaction.purchases">
                      <td>{{ p.amount | currency }}</td>
                      <td>{{ p.description }}</td>
                    </tr>
                  </tbody>

                  <tfoot>
                    <tr>
                      <td>{{ getTotalSpent($index) | currency }}</td>
                      <td>total</td>
                    </tr>
                    <tr class="text-right remaining">
                      <td>{{ (getTotalAmount($index) - getTotalSpent($index)) | currency }}</td>
                      <td>remaining</td>
                    </tr>
                  </tfoot>

                </table>

              </div> <!-- end panel-body -->

              <div class="panel-footer clearfix">
                <div class="col-sm-6">
                  <div class="input-group">
                    <span class="input-group-addon">$</span>
                    <input class="form-control" type="text" ng-model="newPurchase.amount">
                    <span class="input-group-addon">.00</span>
                  </div>
                </div>
                <div class="input-group">
                  <input class="form-control" type="text"
                  placeholder="description" ng-model="newPurchase.desc">
                </div>
                <div class="pull-right">
                  <button class="btn btn-primary btn-purchase"
                    ng-disabled="!newPurchase.amount || !newPurchase.desc"
                    ng-click="addPurchase($index)"> <span
                      class="glyphicon glyphicon-plus"></span>Add purchase</button>
                </div> <!-- end pull-right -->
              </div> <!-- end panel-footer -->

            </div><!-- end panel -->
          </div> <!-- end col-md-4 -->
        </div> <!-- end ng-repeat for withdrawals -->
      </div> <!-- end controller -->

    </div> <!-- end container -->

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.21/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/app.js" type="text/javascript"></script>

  </body>
</html>
